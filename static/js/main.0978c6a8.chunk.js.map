{"version":3,"sources":["store/MobxStore.js","store/index.js","components/Skeleton/index.jsx","components/PanelGenImg/index.jsx","components/PanelAbout/index.jsx","components/PanelLogo/index.jsx","components/PanelComponent/index.jsx","components/PanelAttribute/index.jsx","components/DesignRender/utils.js","components/DesignRender/index.jsx","components/PanelCanvasBase/components/HoverGhost/index.jsx","components/PanelCanvasBase/components/SelectGhost/line.jsx","components/PanelCanvasBase/components/SelectGhost/images/del.svg","components/PanelCanvasBase/components/SelectGhost/images/drag.svg","components/PanelCanvasBase/components/SelectGhost/images/copy.svg","components/PanelCanvasBase/components/SelectGhost/images/top.svg","components/PanelCanvasBase/components/SelectGhost/images/bottom.svg","components/PanelCanvasBase/components/SelectGhost/index.jsx","components/PanelCanvasBase/utils.jsx","components/PanelCanvasAbsolute/index.jsx","components/PanelResizeCanvas/index.jsx","components/PanelOutline/compoents/static/page.svg","components/PanelOutline/compoents/static/group.svg","components/PanelOutline/compoents/static/link.svg","components/PanelOutline/compoents/TreeNode.jsx","components/PanelOutline/compoents/static/arrow.svg","components/PanelOutline/compoents/TreeGroup.jsx","components/PanelOutline/compoents/utils.js","components/PanelOutline/compoents/Tree.jsx","components/PanelOutline/index.jsx","components/PanelDSL/index.jsx","components/PropSetters/TextSetter/index.jsx","components/PropSetters/SelectSetter/index.jsx","components/PropSetters/index.jsx","components/ComponentBanner/Picture/setter.uploader.jsx","components/ComponentBanner/Picture/designView.jsx","components/ComponentBanner/Picture/view.jsx","components/ComponentBanner/Picture/attribute.jsx","components/ComponentBanner/Title/designView.jsx","components/ComponentBanner/Title/view.jsx","components/ComponentBanner/index.jsx","components/ComponentBanner/Title/attribute.jsx","utils/SingleEventBus.js","app.jsx","index.jsx"],"names":["dsl","page","makeObservable","this","observable","setDSL","action","id","value","prop","_delPageDsl","i","length","item","splice","Array","isArray","children","findSubItem","componentItem","props","map","name","componentName","nanoid","push","_getPageDSL","_setPageDslProp","MobxStore","Skeleton","state","dockSelectName","ctx","set","handleFloatBoxOutsideClickHiden","bind","refLeftArea","leftAreaSelectItem","window","addEventListener","removeEventListener","e","contains","target","boxType","handleDockItemOnSelect","topArea","_leftArea","_rightArea","_centerArea","hidden","React","isValidElement","content","align","className","key","cloneElement","leftArea","_topArea","_bottomArea","selectContent","classnames","onClick","placement","title","src","icon","disabled","style","width","toolbarArea","centerArea","rightArea","setState","renderTopArea","ref","_","renderLeftArea","renderToolbar","renderCenterArea","renderRightArea","PureComponent","defaultProps","PanelGenImg","visible","handleOpenDialog","handleCloseDialog","handleDownload","hideMsg","message","loading","canvasDOM","document","getElementById","get","containerId","canvasWidth","offsetWidth","canvasHeight","offsetHeight","ratio","canvasParentDom","parentElement","padding","height","boxSizing","html2canvas","allowTaint","useCORS","scale","then","canvas","refPreview","toDataURL","refDownloadA","href","download","Date","now","finally","body","click","type","onCancel","maskClosable","footer","border","Component","PanelAbout","GithubOutlined","size","open","PanelLogo","display","alignItems","color","fontWeight","viewBox","version","xmlns","d","fill","Logger","level","PanelComponent","refGhost","handleOnDragStart","handleOnDrag","handleOnDragEnd","dataTransfer","dataset","effectAllowed","innerText","setDragImage","clientHeight","setData","cursor","getElementsByTagName","sortComponentList","data","result","forEach","category","Object","entries","filter","index","sortByGroup","onDragStart","onDragEnd","onDrag","defaultActiveKey","bordered","onChange","f","group","Panel","header","component","span","draggable","logger","PanelAttribute","componentInfo","dslInfo","offEventNodeSelect","handleEventNodeSelect","on","log","dslManager","setter","setValue","setPageDslProp","observer","parseProps","context","keys","renderStyle","schema","css","replace","concat","renderSchema","components","createElement","view","toLower","__componentName","__id","appendStyle","_oldEl","innerHTML","el","setAttribute","appendChild","DesignRender","getComponentInstance","utils","HoverGhost","portalDom","ReactDOM","findDOMNode","styles","getEl","text","refName","textContent","nodeInfo","getBoundingClientRect","boundLeft","left","boundTop","top","setStyle","setName","removeChild","createPortal","x","y","sizeStyle","borderColor","SelectGhost","_node","startDrag","startMoveDir","refMask","refTopHorLine","refLeftVerLine","refRightVerLine","startPos","attractDelta","handleClickResize","handleWindowResize","throttle","handleMouseDown","handleMouseMove","handleMouseUp","handleDel","handleToBottom","handleToTop","canvasDomId","boundRight","right","bottom","opStyle","innerWidth","refOp","_setNodeStyle","emit","stopPropagation","preventDefault","mouseX","mouseY","clientWidth","parseInt","offsetTop","offsetLeft","selectTop","selectLeft","dir","selectStyle","classList","transition","canvasPosition","elStyle","diffPos","clientX","clientY","zIndex","dealTop","dealLeft","setPos","refBottomHorLine","setTimeout","cssObj","onDel","setNode","onToTop","componentInstance","currentId","currentCss","zIndexsComponent","replaceId","replaceCss","arr","getComputedStyle","getPropertyValue","swapValue","onToBottom","canResize","onMouseDown","SvgDrag","SvgTop","SvgBottom","SvgDel","getComponentNodeByFiberNode","fiberNode","memoizedProps","return","stateNode","getDSLById","error","PanelCanvasAbsolute","Map","currentHover","currentSelect","currentDragHover","refCanvas","refHoverGhost","refSelectGhost","refDesignRender","draging","handleOnMouseOver","debounce","handleOnClickCapture","handleOnDragOver","handleOnDrop","handleOnClick","handleSelectGhostOnDragStart","handleSelectGhostOnDrag","handleSelectGhostOnDragEnd","handleSelectGhostOnDel","handleGetComponentInstance","handleSelectGhostOnToZIndex","handleOnMouseLeave","selectNodeById","hoverNodeById","handleWinOnDragOver","getData","addPageDSL","_mergeCss","join","cssText","cssParse","parse","silent","stylesheet","parsingErrors","rules","declarations","property","fiberId","find","startsWith","node","delPageDsl","getPageDSL","onClickCapture","onDragOver","onDrop","onMouseLeave","PanelResizeCanvas","handleOnChange","TreeNode","renderIcon","getSvg","svgPage","svgGroup","link","svgLink","renderTitle","renderOp","currentTarget","add","onTreeNodeDragStart","remove","onTreeNodeDragEnd","TreeGroup","expanded","expandedAll","showLine","lastChild","onDragLeave","svgArrow","getNodeByIdAndDel","setNodeByIdAndInsert","Tree","dragEnterIndex","dragEnterDOM","dragPlaceholderIndex","refDragPlaceholder","hoverItem","isDraging","nextProps","onHover","elParent","lastElementChild","enterElTop","enterElHeight","includes","insertBefore","nextElementSibling","placeholderData","__lp_tree_node_id","cloneDeep","JSON","stringify","onDragEnter","firstElementChild","onMouseOver","r","ReactDom","pageDsl","str","other","slice","sort","a","b","getZIndex","Number","match","PanelDSL","language","otherProps","dataSource","Option","TextSetter","SelectSetter","file","URL","createObjectURL","showUploadList","beforeUpload","uploadOnChange","UploadOutlined","url","t","canOperate","description","supportVariable","Picture","SingleEventBus","event","events","eventName","args","callback","removeListener","removeAllListeners","__ctx","dslInstance","DSL","App","openDockByName","render"],"mappings":"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","file":"static/js/main.0978c6a8.chunk.js","sourcesContent":["import { makeObservable, observable, action, computed } from \"mobx\";\nimport { nanoid } from \"nanoid\";\n\nexport default class {\n  dsl = { page: [] };\n  constructor(dsl = { page: [] }) {\n    makeObservable(this, {\n      dsl: observable,\n      setDSL: action,\n    });\n\n    this.dsl = dsl;\n  }\n\n  setDSL(dsl) {\n    this.dsl = dsl;\n  }\n\n  getDSLById(id) {}\n\n  setDSLById(id, value) {}\n\n  setDSLPropValueById(id, prop, value) {}\n\n  getDSLPropValueById(id, prop) {}\n\n  delPageDsl(id) {\n    const page = this.dsl?.page || [];\n\n    this._delPageDsl(page, id);\n  }\n\n  _delPageDsl(dsl, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        return dsl.splice(i, 1)[0];\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._delPageDsl(item.children, id);\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n\n  addPageDSL(componentItem) {\n    const props = {};\n\n    componentItem.props?.map((prop) => {\n      props[prop.name] = prop.value;\n    });\n\n    const item = {\n      id: componentItem.componentName + \"_\" + nanoid(),\n      componentName: componentItem.componentName,\n      props,\n    };\n\n    this.dsl.page.push(item);\n\n    return item;\n  }\n\n  getPageDSL(id) {\n    const page = this.dsl?.page || [];\n\n    return this._getPageDSL(page, id);\n  }\n\n  _getPageDSL(dsl, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        return item;\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._getPageDSL(item.children, id);\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n\n  setPageDslProp(name, value, id) {\n    const page = this.dsl?.page || [];\n\n    this._setPageDslProp(page, name, value, id);\n  }\n\n  _setPageDslProp(dsl, name, value, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        item.props[name] = value;\n        return;\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._setPageDslProp(\n          item.children,\n          name,\n          value,\n          id\n        );\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n}\n","import MobxStore from \"./MobxStore\";\n\nexport default MobxStore;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Tooltip } from \"antd\";\n\nimport \"antd/dist/antd.min.css\";\nimport \"./index.less\";\n\nclass Skeleton extends React.PureComponent {\n  static defaultProps = {\n    ctx: {},\n    topArea: [],\n    leftArea: [],\n    centerArea: [],\n    rightArea: [],\n    toolbarArea: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dockSelectName: \"\",\n    };\n\n    this.props.ctx.set(\"skeleton\", this);\n\n    this.handleFloatBoxOutsideClickHiden =\n      this.handleFloatBoxOutsideClickHiden.bind(this);\n    this.refLeftArea = this.leftAreaSelectItem = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\n      \"click\",\n      this.handleFloatBoxOutsideClickHiden,\n      true\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\n      \"click\",\n      this.handleFloatBoxOutsideClickHiden,\n      true\n    );\n  }\n\n  handleFloatBoxOutsideClickHiden(e) {\n    // left 区域的不处理\n    if (this.refLeftArea?.contains(e.target)) {\n      return;\n    }\n\n    // 不是 flat 类型的不处理\n    if (this.leftAreaSelectItem?.boxType != \"float\") {\n      return;\n    }\n\n    this.handleDockItemOnSelect();\n  }\n\n  renderTopArea() {\n    const { topArea, ctx } = this.props;\n    const _leftArea = [];\n    const _rightArea = [];\n    const _centerArea = [];\n\n    topArea.map((item) => {\n      if (item.hidden || !React.isValidElement(item.content)) {\n        return;\n      }\n\n      if (item.align === \"left\" || !item.align) {\n        _leftArea.push(item);\n      } else if (item.align === \"center\") {\n        _centerArea.push(item);\n      } else if (item.align === \"right\") {\n        _rightArea.push(item);\n      }\n    });\n\n    return (\n      <>\n        <div className=\"skeleton-top-area-left\">\n          {_leftArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n        <div className=\"skeleton-top-area-center\">\n          {_centerArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n        <div className=\"skeleton-top-area-right\">\n          {_rightArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n      </>\n    );\n  }\n\n  renderLeftArea() {\n    const { leftArea, ctx } = this.props;\n    const { dockSelectName } = this.state;\n    const _topArea = [];\n    const _bottomArea = [];\n    let selectContent = null;\n    this.leftAreaSelectItem = {};\n\n    leftArea.map((item) => {\n      if (item.hidden || !React.isValidElement(item.content)) {\n        return;\n      }\n\n      if (item.name === dockSelectName) {\n        selectContent = item.content;\n        this.leftAreaSelectItem = item;\n      }\n\n      if (item.align === \"top\" || !item.align) {\n        _topArea.push(item);\n      } else if (item.align === \"bottom\") {\n        _bottomArea.push(item);\n      }\n    });\n\n    return (\n      <>\n        <div className=\"skeleton-left-area-dock\">\n          <div className=\"skeleton-left-area-dock-top\">\n            {_topArea.map((item, key) => (\n              <div\n                className={classnames(\"skeleton-left-area-dock-item\", {\n                  \"skeleton-left-area-dock-item-selected\":\n                    item.name === dockSelectName,\n                })}\n                key={key}\n                onClick={() => this.handleDockItemOnSelect(item)}\n              >\n                <Tooltip placement=\"right\" title={item.title}>\n                  <img\n                    src={item.icon}\n                    className={classnames({\n                      \"skeleton-left-area-dock-item-disabled\": item.disabled,\n                    })}\n                  />\n                </Tooltip>\n              </div>\n            ))}\n          </div>\n          <div className=\"skeleton-left-area-dock-bottom\">\n            {_bottomArea.map((item, key) => (\n              <div\n                className={classnames(\"skeleton-left-area-dock-item\", {\n                  \"skeleton-left-area-dock-item-selected\":\n                    item.name === dockSelectName,\n                })}\n                key={key}\n                onClick={() => this.handleDockItemOnSelect(item)}\n              >\n                <Tooltip placement=\"right\" title={item.title}>\n                  <img\n                    src={item.icon}\n                    className={classnames({\n                      \"skeleton-left-area-dock-item-disabled\": item.disabled,\n                    })}\n                  />\n                </Tooltip>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* 下面这块可以加缓存处理 */}\n        {/* class 后面加个 prop 来判断 */}\n        {/* todo: 在这里加入 悬浮显示类型，可拖动宽度效果 */}\n        {selectContent ? (\n          <div\n            className={classnames({\n              \"skeleton-left-area-panel-fixed\":\n                this.leftAreaSelectItem?.boxType != \"float\",\n              \"skeleton-left-area-panel-float\":\n                this.leftAreaSelectItem?.boxType == \"float\",\n            })}\n            style={(() => {\n              if (this.leftAreaSelectItem?.width) {\n                return {\n                  width: this.leftAreaSelectItem.width,\n                };\n              }\n              return {};\n            })()}\n          >\n            {React.cloneElement(selectContent, { ctx: ctx })}\n          </div>\n        ) : null}\n      </>\n    );\n  }\n\n  renderToolbar() {\n    const { toolbarArea, ctx } = this.props;\n\n    if (!toolbarArea.length) {\n      return null;\n    }\n\n    return <div className=\"skeleton-center-toolbar\"></div>;\n  }\n\n  renderCenterArea() {\n    const { centerArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton-center-area\">\n        {centerArea.map((item, key) => {\n          if (item.hidden || !React.isValidElement(item.content)) {\n            return;\n          }\n\n          return React.cloneElement(item.content, { ctx: ctx, key });\n        })}\n      </div>\n    );\n  }\n\n  renderRightArea() {\n    const { rightArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton-right-area\">\n        {rightArea.map((item, key) => {\n          if (item.hidden || !React.isValidElement(item.content)) {\n            return;\n          }\n\n          return React.cloneElement(item.content, { ctx: ctx, key });\n        })}\n      </div>\n    );\n  }\n\n  handleDockItemOnSelect(item) {\n    const { dockSelectName } = this.state;\n\n    if (item?.disabled) {\n      return;\n    }\n\n    this.setState({\n      dockSelectName: item?.name === dockSelectName ? \"\" : item?.name,\n    });\n  }\n\n  openDockByName(name) {\n    this.setState({\n      dockSelectName: name,\n    });\n  }\n\n  render() {\n    const { topArea, leftArea, centerArea, rightArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton\">\n        <div className=\"skeleton-top-area\">{this.renderTopArea()}</div>\n        <div className=\"skeleton-bottom\">\n          <div\n            className=\"skeleton-left-area\"\n            ref={(_) => (this.refLeftArea = _)}\n          >\n            {this.renderLeftArea()}\n          </div>\n          <div className=\"skeleton-center\">\n            {this.renderToolbar()}\n            {this.renderCenterArea()}\n          </div>\n          {this.renderRightArea()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Skeleton;\n","import React from \"react\";\nimport html2canvas from \"html2canvas\";\nimport { Button, Modal, message } from \"antd\";\n\nimport \"antd/lib/button/style/index.css\";\nimport \"antd/lib/modal/style/index.css\";\nimport \"antd/lib/message/style/index.css\";\n\nclass PanelGenImg extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n    };\n\n    this.handleOpenDialog = this.handleOpenDialog.bind(this);\n    this.handleCloseDialog = this.handleCloseDialog.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n\n  handleOpenDialog() {\n    const { ctx } = this.props;\n    const hideMsg = message.loading(\"生成中……\");\n    const canvasDOM = document.getElementById(ctx.get(\"canvas\").containerId);\n\n    // bilibili pading\n    const canvasWidth = canvasDOM.offsetWidth;\n    const canvasHeight = canvasDOM.offsetHeight;\n    const ratio = 2917 / canvasWidth;\n    const canvasParentDom = canvasDOM.parentElement;\n\n    canvasParentDom.style.padding = `${80 / ratio}px ${218 / ratio}px`;\n    canvasParentDom.style.width = canvasWidth + \"px\";\n    canvasParentDom.style.height = canvasHeight + \"px\";\n    canvasParentDom.style.boxSizing = \"content-box\";\n\n    html2canvas(\n      document.getElementById(ctx.get(\"canvas\").containerId).parentElement,\n      {\n        allowTaint: true,\n        useCORS: true,\n        scale: 4,\n      }\n    )\n      .then((canvas) => {\n        canvasParentDom.style = \"\";\n        hideMsg();\n        this.setState(\n          {\n            visible: true,\n          },\n          () => {\n            this.refPreview.src = canvas.toDataURL();\n\n            this.refDownloadA.href = this.refPreview.src;\n            this.refDownloadA.download = Date.now() + \".png\";\n          }\n        );\n      })\n      .finally(() => {\n        // 触发 selectGhost 计算位置\n        window.document.body.click();\n      });\n  }\n\n  handleCloseDialog() {\n    this.setState({\n      visible: false,\n    });\n  }\n\n  handleDownload() {\n    this.refDownloadA.click();\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.handleOpenDialog}>\n          生成图片\n        </Button>\n\n        <Modal\n          title=\"生成图片\"\n          visible={visible}\n          onCancel={this.handleCloseDialog}\n          maskClosable={false}\n          footer={[\n            <Button type=\"primary\" onClick={this.handleDownload} key=\"1\">\n              下载图片\n            </Button>,\n          ]}\n        >\n          <a ref={(_) => (this.refDownloadA = _)}></a>\n          <img\n            style={{ width: \"100%\", border: \"1px dashed \" }}\n            ref={(_) => (this.refPreview = _)}\n          />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default PanelGenImg;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { GithubOutlined } from \"@ant-design/icons\";\nimport \"antd/lib/button/style/index.css\";\n\nclass PanelAbout extends React.Component {\n  render() {\n    return (\n      <div>\n        <Button\n          type=\"text\"\n          icon={<GithubOutlined size=\"large\" />}\n          onClick={() => {\n            window.open(\"http://github.com/lecepin\");\n          }}\n        >\n          源码\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport default PanelAbout;\n","import React from \"react\";\n\nclass PanelLogo extends React.Component {\n  render() {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          color: \"#f14767\",\n          fontWeight: \"bold\",\n        }}\n      >\n        <svg\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{\n            height: 35,\n          }}\n        >\n          <path\n            d=\"M129.36 208c131.28-4.88 760.4 0 760.4 0s122.88 25.6 126.16 160.4c-1.6 134.8 0 404.16 0 404.16s-6.8 131.6-124.56 152.48c-50.48-1.68-67.2 0-67.2 0s-3.36 55.36-52.96 56.16c-49.76 0.72-57.2-38.56-58.88-52.96-28.48 0-352.88 1.44-390.16 1.6h-3.52s-6 51.36-55.6 51.36c-49.76 0-52.16-42.56-55.52-51.28-32 0-75.68-0.8-75.68-0.8s-109.6-21.6-123.76-157.2c1.84-130.4 0.24-383.12 0.08-402.32v-1.28C7.84 362.88 1.04 242.56 129.36 208z m745.92 98.4H158.96c-21.76 0-39.44 17.28-39.44 38.56v452.4c0 21.36 17.68 38.56 39.44 38.56h716.32c21.76 0 39.36-17.28 39.36-38.56V344.88c0-21.28-17.6-38.48-39.36-38.48zM527.92 610.96c49.92 108.56 105.04 28.8 105.04 28.8l31.28 20.4s-58.48 94.16-135.6 22.96c-65.2 71.28-133.76-22.64-133.76-22.64l34.8-22.32 0.24 0.48c3.92 6.56 48.56 78.56 98-27.68zM413.68 399.68l16 79.76-210.08 40.72-17.76-79.76 211.84-40.72z m235.44 0l211.76 40.72-17.84 79.76-210.16-40.72 16.24-79.76z m85.6-337.92c8.4-6 9.68-15.6 34.32 6 21.76 19.2 12.96 36.48 10.56 40.24l-0.48 0.8-93.12 97.04H596.24S726.4 67.84 734.72 61.76zM328 58.16c8.32 6 138.48 144.08 138.48 144.08H376.72L283.68 105.2s-14.56-19.28 10-41.04c24.8-21.6 26-12 34.32-6z m0 0\"\n            fill=\"#F14767\"\n            p-id=\"5140\"\n          ></path>\n        </svg>\n        &nbsp;\n        <span>封面编辑</span>\n      </div>\n    );\n  }\n}\n\nexport default PanelLogo;\n","import React from \"react\";\nimport { Collapse, Row, Col } from \"antd\";\nimport Logger from \"lp-logger\";\n\nimport \"antd/dist/antd.min.css\";\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelComponent\",\n  level: \"error\",\n});\n\nfunction sortByGroup(data) {\n  const result = {};\n\n  data.forEach((item, key) => {\n    if (!result[item.category]) {\n      result[item.category] = [];\n    }\n\n    item.hidden != true && result[item.category].push(item);\n  });\n\n  return Object.entries(result)\n    .filter((item) => item[1].length)\n    .map((item, index) => ({\n      key: item[0],\n      id: index,\n      value: item[1],\n    }));\n}\n\nclass PanelComponent extends React.Component {\n  static defaultProps = {};\n\n  constructor(props) {\n    super(props);\n\n    this.refGhost = null;\n\n    this.handleOnDragStart = this.handleOnDragStart.bind(this);\n    this.handleOnDrag = this.handleOnDrag.bind(this);\n    this.handleOnDragEnd = this.handleOnDragEnd.bind(this);\n  }\n\n  handleOnDragStart({ target, dataTransfer }) {\n    if (target.dataset[\"type\"] != \"component\") {\n      return;\n    }\n\n    if (!this.refGhost) {\n      return;\n    }\n\n    dataTransfer.effectAllowed = \"move\";\n\n    this.refGhost.innerText = target.dataset[\"title\"];\n    dataTransfer.setDragImage(this.refGhost, 0, this.refGhost.clientHeight / 2);\n    dataTransfer.setData(\"componentName\", target.dataset[\"componentName\"]);\n  }\n\n  handleOnDrag({ target }) {\n    target.style.cursor = \"unset\";\n    window.document.getElementsByTagName(\"html\")[0].style.cursor = \"move\";\n  }\n\n  handleOnDragEnd({ target }) {\n    window.document.getElementsByTagName(\"html\")[0].style.cursor = \"default\";\n    target.style.cursor = \"grab\";\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const sortComponentList = sortByGroup(ctx.get(\"component\"));\n\n    return (\n      <div\n        className=\"panel-component\"\n        onDragStart={this.handleOnDragStart}\n        onDragEnd={this.handleOnDragEnd}\n        onDrag={this.handleOnDrag}\n      >\n        <div className=\"panel-component-ghost-hidden\">\n          <div\n            className=\"panel-component-ghost\"\n            ref={(_) => (this.refGhost = _)}\n          ></div>\n        </div>\n        <Collapse\n          defaultActiveKey={sortComponentList.map((item) => item.id)}\n          bordered={false}\n          onChange={(f) => f}\n        >\n          {sortComponentList.map((group) => (\n            <Collapse.Panel header={group.key} key={group.id}>\n              <Row>\n                {group.value.map((component, key) => (\n                  <Col span={6} key={key}>\n                    <div\n                      className=\"panel-component-item\"\n                      draggable\n                      title={component.title}\n                      data-type=\"component\"\n                      data-title={component.title}\n                      data-component-name={component.componentName}\n                    >\n                      {/* <img\n                        draggable=\"false\"\n                        className=\"panel-component-item-img\"\n                        src={component.icon}\n                      /> */}\n                      {component.icon}\n                      <div className=\"panel-component-item-title\">\n                        {component.title}\n                      </div>\n                    </div>\n                  </Col>\n                ))}\n              </Row>\n            </Collapse.Panel>\n          ))}\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nexport default PanelComponent;\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport { observer } from \"mobx-react\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelAttribute\",\n  level: \"error\",\n});\n\nclass PanelAttribute extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      componentInfo: null,\n      dslInfo: null,\n    };\n\n    this.offEventNodeSelect = null;\n    this.handleEventNodeSelect = this.handleEventNodeSelect.bind(this);\n  }\n\n  componentDidMount() {\n    const { ctx } = this.props;\n\n    this.offEventNodeSelect = ctx\n      ?.get(\"event\")\n      ?.on?.(\"le.node.select\", this.handleEventNodeSelect);\n  }\n\n  componentWillUnmount() {\n    this.offEventNodeSelect?.();\n  }\n\n  handleEventNodeSelect(e) {\n    logger.log(\"handleEventNodeSelect\", e);\n    this.setState({\n      componentInfo: e?.componentInfo,\n      dslInfo: e?.dslInfo,\n    });\n  }\n\n  render() {\n    const { componentInfo, dslInfo } = this.state;\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    logger.log(\"render\");\n\n    if (!componentInfo) {\n      return (\n        <div className=\"panel-attribute\">\n          <div className=\"panel-attribute-noselect\">请在左侧画布选择</div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"panel-attribute\">\n        <div className=\"panel-attribute-name\">{componentInfo?.title}</div>\n        <div className=\"panel-attribute-content\">\n          {componentInfo?.props\n            ?.filter((item) => item.display != \"none\")\n            ?.map((item, index) => (\n              <div key={index} className=\"panel-attribute-item\">\n                <div className=\"panel-attribute-item-title\">{item.title}</div>\n                <div className=\"panel-attribute-item-content\">\n                  {React.cloneElement(item.setter, {\n                    value: dslInfo.props[item.name],\n                    setValue: (value) =>\n                      dslManager.setPageDslProp(item.name, value, dslInfo.id),\n                  })}\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelAttribute);\n","import React from \"react\";\nimport { toLower } from \"lodash\";\n\n// 递归渲染 Schema\nfunction renderStyle(schema) {\n  if (!schema) {\n    return \"\";\n  }\n\n  const result = [];\n\n  (Array.isArray(schema) ? schema : [schema]).map((item) => {\n    if (item?.props?.css && item.id) {\n      result.push({\n        id: item.id,\n        css: item.props.css.replace(\":root\", `.${item.id}`),\n      });\n      result.concat(renderStyle(item.children));\n    }\n  });\n\n  return result;\n}\n\n// 解析props\nfunction parseProps(props, context) {\n  const result = {};\n\n  Object.keys(props).map((key) => {\n    result[key] = props[key];\n  });\n\n  return result;\n}\n\n// 渲染 Schema\nfunction renderSchema(schema, components, context, props = {}) {\n  if (!schema) {\n    return null;\n  }\n\n  return (Array.isArray(schema) ? schema : [schema]).map((item, key) => {\n    if (item.componentName) {\n      // 如果 children 只是一个字符串的话，不进行任何包装\n      return React.createElement(\n        components?.get(item.componentName)?.view ||\n          toLower(item.componentName),\n        {\n          ...parseProps(item.props || {}, context),\n          className: item.id,\n          key,\n          __componentName: item.componentName,\n          __id: item.id,\n          ...props,\n        },\n        renderSchema(item.children, components, context, props)\n      );\n    }\n\n    return item; // 直接反回字符串\n  });\n}\n\n// 添加样式\nfunction appendStyle({ id, css }) {\n  const _oldEl = document.getElementById(\"style-\" + id);\n  if (_oldEl) {\n    _oldEl.innerHTML = css;\n    return;\n  }\n\n  const el = document.createElement(\"style\");\n\n  el.setAttribute(\"type\", \"text/css\");\n  el.setAttribute(\"id\", \"style-\" + id);\n  el.innerHTML = css;\n\n  document.getElementsByTagName(\"head\")[0].appendChild(el);\n}\n\nexport default {\n  renderStyle,\n  renderSchema,\n  appendStyle,\n};\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport utils from \"./utils\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-DesignRender\",\n  level: \"error\",\n});\nclass DesignRender extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {}\n\n  render() {\n    logger.log(\"render\");\n    const {\n      dsl,\n      component,\n      style = {},\n      className,\n      getComponentInstance,\n    } = this.props;\n\n    // todo: clear unuse style\n    utils.renderStyle(dsl).map((item) => utils.appendStyle(item));\n\n    return (\n      <div className={classnames(\"design-render\", className)} style={style}>\n        {utils.renderSchema(dsl, component, this, {\n          ref: getComponentInstance,\n        })}\n      </div>\n    );\n  }\n}\n\nexport default observer(DesignRender);\nexport { utils };\n","import React from \"react\";\nimport ReactDOM, { createPortal } from \"react-dom\";\n\nimport \"./index.less\";\n\nexport default class HoverGhost extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.portalDom = document.createElement(\"div\");\n    document.body.appendChild(this.portalDom);\n  }\n  getEl() {\n    return ReactDOM.findDOMNode(this.ref);\n  }\n\n  setStyle(styles) {\n    const el = this.getEl();\n\n    Object.entries(styles).map((item) => {\n      el.style[item[0]] = item[1];\n    });\n  }\n\n  setName(text) {\n    const el = ReactDOM.findDOMNode(this.refName);\n\n    el.textContent = text;\n  }\n\n  setNode(el, nodeInfo) {\n    if (!el) {\n      this.setStyle({\n        display: \"none\",\n      });\n\n      return;\n    }\n\n    const {\n      left: boundLeft,\n      top: boundTop,\n      width: boundWidth,\n      height: boundHeight,\n    } = el.getBoundingClientRect();\n    const width = el.offsetWidth;\n    const height = el.offsetHeight;\n    // const centerPointer = {\n    //   x: boundLeft + boundWidth / 2,\n    //   y: boundTop + boundHeight / 2,\n    // };\n\n    // 要获取未旋转时的 left/top ?\n    // const left = centerPointer.x - width / 2;\n    // const top = centerPointer.y - height / 2;\n\n    this.setStyle({\n      left: boundLeft + \"px\",\n      top: boundTop + \"px\",\n      width: width + \"px\",\n      height: height + \"px\",\n      display: \"block\",\n      // transform: ,\n    });\n    this.setName(nodeInfo.componentInfo.title);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.portalDom);\n  }\n\n  render() {\n    return createPortal(\n      <div\n        ref={(_) => (this.ref = _)}\n        className=\"panel-canvas-base-hover-ghost\"\n      >\n        <div\n          ref={(_) => (this.refName = _)}\n          className=\"panel-canvas-base-hover-ghost-name\"\n        ></div>\n      </div>,\n      this.portalDom\n    );\n  }\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./line.less\";\n\nexport default class extends React.Component {\n  static defaultProps = {\n    type: \"hor\", // ver\n    color: \"#f759ab\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      size: \"0\",\n      x: \"0\",\n      y: \"0\",\n    };\n  }\n\n  setPos({ size, x, y }) {\n    this.setState({\n      size,\n      x,\n      y,\n    });\n  }\n\n  render() {\n    const { type, color } = this.props;\n    const { size, x, y } = this.state;\n    const sizeStyle = {\n      left: x,\n      top: y,\n      borderColor: color,\n    };\n\n    if (type == \"hor\") {\n      sizeStyle.width = size;\n    } else {\n      sizeStyle.height = size;\n    }\n\n    return (\n      <div\n        className={classnames(\"reference-line\", \"reference-line-\" + type)}\n        style={sizeStyle}\n      ></div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/del.e6962b35.svg\";","export default __webpack_public_path__ + \"static/media/drag.fa656f9f.svg\";","export default __webpack_public_path__ + \"static/media/copy.8788c23f.svg\";","export default __webpack_public_path__ + \"static/media/top.b88164e7.svg\";","export default __webpack_public_path__ + \"static/media/bottom.d38bfaa6.svg\";","import React from \"react\";\nimport ReactDOM, { createPortal } from \"react-dom\";\nimport { throttle } from \"lodash\";\nimport Logger from \"lp-logger\";\nimport Line from \"./line\";\n\nimport SvgDel from \"./images/del.svg\";\nimport SvgCopy from \"./images/copy.svg\";\nimport SvgDrag from \"./images/drag.svg\";\nimport SvgTop from \"./images/top.svg\";\nimport SvgBottom from \"./images/bottom.svg\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-SelectGhost\",\n  level: \"error\",\n});\n\nexport default class SelectGhost extends React.PureComponent {\n  static defaultProps = {\n    canResize: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._node = this.startDrag = this.startMoveDir = null;\n    this.refMask =\n      this.ref =\n      this.refTopHorLine =\n      this.refLeftVerLine =\n      this.refRightVerLine =\n        null;\n    this.startPos = {};\n    this.attractDelta = 10;\n\n    this.handleClickResize = this.handleClickResize.bind(this);\n    this.handleWindowResize = throttle(this.handleClickResize.bind(this), 300);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleDel = this.handleDel.bind(this);\n    this.handleToBottom = this.handleToBottom.bind(this);\n    this.handleToTop = this.handleToTop.bind(this);\n\n    this.portalDom = document.createElement(\"div\");\n    document.body.appendChild(this.portalDom);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickResize);\n    window.addEventListener(\"resize\", this.handleWindowResize);\n    window.addEventListener(\"keyup\", this.handleWindowResize);\n\n    window.addEventListener(\"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickResize);\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    window.addEventListener(\"keyup\", this.handleWindowResize);\n    window.removeEventListener(\"mouseup\", this.handleMouseUp);\n\n    document.body.removeChild(this.portalDom);\n  }\n\n  getEl() {\n    return ReactDOM.findDOMNode(this.ref);\n  }\n\n  setStyle(styles) {\n    const el = this.getEl();\n\n    el &&\n      Object.entries(styles).map((item) => {\n        el.style[item[0]] = item[1];\n      });\n  }\n\n  setName(text) {\n    const el = ReactDOM.findDOMNode(this.refName);\n\n    el.textContent = text;\n  }\n\n  _setNodeStyle() {\n    const el = this._node?.el;\n    const { canvasDomId } = this.props;\n\n    if (!el) {\n      this.setStyle({\n        display: \"none\",\n      });\n\n      return;\n    }\n\n    const canvasDom = document.getElementById(canvasDomId);\n    const canvasPosition = canvasDom.getBoundingClientRect();\n    const {\n      left: boundLeft,\n      top: boundTop,\n      right: boundRight,\n      bottom: boundBottom,\n      width: boundWidth,\n      height: boundHeight,\n    } = el.getBoundingClientRect();\n    const width = el.offsetWidth;\n    const height = el.offsetHeight;\n    // const centerPointer = {\n    //   x: boundLeft + boundWidth / 2,\n    //   y: boundTop + boundHeight / 2,\n    // };\n\n    // 要获取未旋转时的 left/top ?\n    // const left = centerPointer.x - width / 2;\n    // const top = centerPointer.y - height / 2;\n\n    // todo： 滚动的处理\n    this.setStyle({\n      left: boundLeft + \"px\",\n      top: boundTop + \"px\",\n      width: width + \"px\",\n      height: height + \"px\",\n      display: \"block\",\n      // transform: ,\n    });\n\n    // op操作区位置重置\n    const opHeight = 30;\n    const opStyle = {\n      left: \"unset\",\n      top: \"unset\",\n      right: \"unset\",\n      bottom: \"unset\",\n    };\n\n    if (boundTop < opHeight) {\n      opStyle.bottom = -1 * opHeight + \"px\";\n    } else if (boundBottom < opHeight) {\n      opStyle.top = -1 * opHeight + \"px\";\n    } else {\n      opStyle.top = -1 * opHeight + \"px\";\n    }\n    if (boundLeft < 0) {\n      opStyle.right = 0;\n    } else if (boundRight > window.innerWidth) {\n      opStyle.left = 0;\n    } else {\n      opStyle.right = 0;\n    }\n\n    Object.entries(opStyle).map(\n      ([name, value]) => (this.refOp.style[name] = value)\n    );\n  }\n\n  // todo: 优化只有resize canvas才触发\n  // 解决canvas变化，select没有同步大小\n  handleClickResize() {\n    this._setNodeStyle();\n  }\n\n  setNode(nodeInfo) {\n    const { ctx } = this.props;\n\n    ctx?.get(\"event\")?.emit(\"le.node.select\", nodeInfo);\n    this._node = nodeInfo;\n    this._setNodeStyle();\n  }\n\n  handleMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const { onDragStart } = this.props;\n    const el = this._node?.el;\n\n    this.startPos = {\n      // 开始位置需要取真正边上的位置，改用 clientX，来实现配合 getBoundingClientRect 计算真实位置\n      mouseX: e.target.getBoundingClientRect().x + e.target.offsetWidth / 2,\n      mouseY: e.target.getBoundingClientRect().y + +e.target.offsetHeight / 2,\n      // ? margin\n      width: this.ref.clientWidth,\n      height: this.ref.clientHeight,\n      top: parseInt(this.ref.offsetTop) || 0,\n      left: parseInt(this.ref.offsetLeft) || 0,\n      selectTop: parseInt(el.offsetTop) || 0,\n      selectLeft: parseInt(el.offsetLeft) || 0,\n      dir: e.target.dataset.dir,\n      selectStyle: el.style,\n    };\n\n    window.addEventListener(\"mousemove\", this.handleMouseMove);\n\n    // 按下拖拽\n    if (e.target.classList.contains(\"panel-canvas-base-select-ghost-drag\")) {\n      onDragStart?.();\n      this.startDrag = true;\n      // 防止动画干扰拖动\n      el.style.transition = \"none\";\n      return;\n    }\n\n    // 大小调整\n    if (e.target.classList.contains(\"panel-canvas-base-select-ghost-block\")) {\n      this.startMoveDir = true;\n      // 防止动画干扰拖动\n      el.style.transition = \"none\";\n      return;\n    }\n  }\n\n  handleMouseMove(e) {\n    const { onDrag, canvasDomId } = this.props;\n    const el = this._node?.el;\n    const canvasDom = document.getElementById(canvasDomId);\n    const canvasPosition = canvasDom.getBoundingClientRect();\n    const elStyle = {};\n    let diffPos = {\n      left: e.clientX - this.startPos.mouseX,\n      top: e.clientY - this.startPos.mouseY,\n    };\n\n    // 拖动\n    if (this.startDrag) {\n      this.refMask.style.display = \"block\";\n      this.ref.style.zIndex = 99999;\n\n      let dealTop = this.startPos.top + diffPos.top;\n      let dealLeft = this.startPos.left + diffPos.left;\n\n      // 吸附判断 顶部\n      if (\n        dealTop >= -1 * this.attractDelta + canvasPosition.top &&\n        dealTop <= this.attractDelta + canvasPosition.top\n      ) {\n        this.ref.style.top = canvasPosition.top + \"px\";\n        elStyle.top = 0;\n        this.refTopHorLine.setPos({\n          size: canvasPosition.width + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      }\n      // 吸附判断 底部\n      else if (\n        dealTop + this.startPos.height >=\n          -1 * this.attractDelta + canvasPosition.bottom &&\n        dealTop + this.startPos.height <=\n          this.attractDelta + canvasPosition.bottom\n      ) {\n        this.ref.style.top =\n          canvasPosition.bottom - this.startPos.height + \"px\";\n        elStyle.top = canvasPosition.height - this.startPos.height + \"px\";\n        this.refBottomHorLine.setPos({\n          size: canvasPosition.width + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.bottom + \"px\",\n        });\n      } else {\n        this.ref.style.top = this.startPos.top + diffPos.top + \"px\";\n        elStyle.top = this.startPos.selectTop + diffPos.top + \"px\";\n\n        this.refTopHorLine.setPos({ size: 0 });\n        this.refBottomHorLine.setPos({ size: 0 });\n      }\n\n      // 吸附判断 左侧\n      if (\n        dealLeft >= -1 * this.attractDelta + canvasPosition.left &&\n        dealLeft <= this.attractDelta + canvasPosition.left\n      ) {\n        this.ref.style.left = canvasPosition.left + \"px\";\n        elStyle.left = 0;\n        this.refLeftVerLine.setPos({\n          size: canvasPosition.height + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      }\n      // 吸附判断 右侧\n      else if (\n        dealLeft + this.startPos.width >=\n          -1 * this.attractDelta + canvasPosition.right &&\n        dealLeft + this.startPos.width <=\n          this.attractDelta + canvasPosition.right\n      ) {\n        this.ref.style.left = canvasPosition.right - this.startPos.width + \"px\";\n        elStyle.left = canvasPosition.width - this.startPos.width + \"px\";\n        this.refRightVerLine.setPos({\n          size: canvasPosition.height + \"px\",\n          x: canvasPosition.right + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      } else {\n        this.ref.style.left = this.startPos.left + diffPos.left + \"px\";\n        elStyle.left = this.startPos.selectLeft + diffPos.left + \"px\";\n\n        this.refLeftVerLine.setPos({ size: 0 });\n        this.refRightVerLine.setPos({ size: 0 });\n      }\n\n      el.style.left = elStyle.left;\n      el.style.top = elStyle.top;\n\n      onDrag?.(elStyle);\n      return;\n    }\n\n    // 大小调整\n    if (this.startMoveDir) {\n      // 方向判断\n      if (this.startPos.dir[0] == \"t\") {\n        // 往上\n        {\n          // 吸顶判断 顶部\n          let dealTop = this.startPos.top + diffPos.top;\n          if (\n            dealTop >= -1 * this.attractDelta + canvasPosition.top &&\n            dealTop <= this.attractDelta + canvasPosition.top\n          ) {\n            this.ref.style.top = canvasPosition.top + \"px\";\n            this.ref.style.height =\n              this.startPos.height -\n              (canvasPosition.top - this.startPos.mouseY) +\n              \"px\";\n            elStyle.top = 0 + \"px\";\n            elStyle.height =\n              this.startPos.height -\n              (canvasPosition.top - this.startPos.mouseY) +\n              \"px\";\n\n            this.refTopHorLine.setPos({\n              size: canvasPosition.width + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.top = this.startPos.top + diffPos.top + \"px\";\n            this.ref.style.height = this.startPos.height - diffPos.top + \"px\";\n            elStyle.top = this.startPos.selectTop + diffPos.top + \"px\";\n            elStyle.height = this.startPos.height - diffPos.top + \"px\";\n\n            this.refTopHorLine.setPos({ size: 0 });\n          }\n        }\n      } else if (this.startPos.dir[0] == \"b\") {\n        // 往下\n        {\n          // 吸顶判断 顶部\n          let dealTop = this.startPos.top + diffPos.top;\n          if (\n            dealTop + this.startPos.height >=\n              -1 * this.attractDelta + canvasPosition.bottom &&\n            dealTop + this.startPos.height <=\n              this.attractDelta + canvasPosition.bottom\n          ) {\n            this.ref.style.height =\n              this.startPos.height +\n              (canvasPosition.bottom - this.startPos.mouseY) +\n              \"px\";\n            elStyle.height =\n              this.startPos.height +\n              (canvasPosition.bottom - this.startPos.mouseY) +\n              \"px\";\n\n            this.refBottomHorLine.setPos({\n              size: canvasPosition.width + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.bottom + \"px\",\n            });\n          } else {\n            this.ref.style.height = this.startPos.height + diffPos.top + \"px\";\n            elStyle.height = this.startPos.height + diffPos.top + \"px\";\n\n            this.refBottomHorLine.setPos({ size: 0 });\n          }\n        }\n      }\n      if (this.startPos.dir[1] == \"l\") {\n        // 往左\n        {\n          let dealLeft = this.startPos.left + diffPos.left;\n\n          // 吸顶判断 左部\n          if (\n            dealLeft >= -1 * this.attractDelta + canvasPosition.left &&\n            dealLeft <= this.attractDelta + canvasPosition.left\n          ) {\n            this.ref.style.left = canvasPosition.left + \"px\";\n            this.ref.style.width =\n              this.startPos.width -\n              (canvasPosition.left - this.startPos.mouseX) +\n              \"px\";\n            elStyle.left = 0;\n            elStyle.width =\n              this.startPos.width -\n              (canvasPosition.left - this.startPos.mouseX) +\n              \"px\";\n\n            this.refLeftVerLine.setPos({\n              size: canvasPosition.height + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.left = this.startPos.left + diffPos.left + \"px\";\n            this.ref.style.width = this.startPos.width - diffPos.left + \"px\";\n            elStyle.left = this.startPos.selectLeft + diffPos.left + \"px\";\n            elStyle.width = this.startPos.width - diffPos.left + \"px\";\n\n            this.refLeftVerLine.setPos({\n              size: 0,\n            });\n          }\n        }\n      } else if (this.startPos.dir[1] == \"r\") {\n        // 往右\n        {\n          let dealLeft = this.startPos.left + diffPos.left;\n\n          // 吸顶判断 右部\n          if (\n            dealLeft + this.startPos.width >=\n              -1 * this.attractDelta + canvasPosition.right &&\n            dealLeft + this.startPos.width <=\n              this.attractDelta + canvasPosition.right\n          ) {\n            this.ref.style.width =\n              this.startPos.width +\n              (canvasPosition.right - this.startPos.mouseX) +\n              \"px\";\n            elStyle.width =\n              this.startPos.width +\n              (canvasPosition.right - this.startPos.mouseX) +\n              \"px\";\n\n            this.refRightVerLine.setPos({\n              size: canvasPosition.height + \"px\",\n              x: canvasPosition.right + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.width = this.startPos.width + diffPos.left + \"px\";\n            elStyle.width = this.startPos.width + diffPos.left + \"px\";\n\n            this.refRightVerLine.setPos({ size: 0 });\n          }\n        }\n      }\n\n      Object.entries(elStyle).filter(([key, value]) => (el.style[key] = value));\n    }\n  }\n\n  handleMouseUp(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    window.removeEventListener(\"mousemove\", this.handleMouseMove);\n\n    const { onDragEnd } = this.props;\n\n    // click的执行顺序问题\n    (this.startDrag || this.startMoveDir) &&\n      setTimeout(() => {\n        const cssObj = {\n          left: (this._node?.el?.offsetLeft || 0) + \"px\",\n          top: (this._node?.el?.offsetTop || 0) + \"px\",\n        };\n\n        this._node?.el?.style?.width &&\n          (cssObj.width = this._node?.el?.style?.width);\n        this._node?.el?.style?.height &&\n          (cssObj.height = this._node?.el?.style?.height);\n\n        // reset el style\n        this._node.el.style = this.startPos.selectStyle;\n        onDragEnd?.(cssObj, this._node);\n      });\n\n    // 重置标志位\n    this.startDrag = this.startMoveDir = false;\n    this.refMask.style.display = \"none\";\n    this.ref.style.zIndex = 800;\n    this.refTopHorLine.setPos({ size: 0 });\n    this.refBottomHorLine.setPos({ size: 0 });\n    this.refLeftVerLine.setPos({ size: 0 });\n    this.refRightVerLine.setPos({ size: 0 });\n  }\n\n  handleDel() {\n    const { ctx, onDel } = this.props;\n\n    ctx?.get(\"event\")?.emit(\"le.node.select\");\n    onDel?.(this._node);\n    this.setNode(null);\n  }\n\n  handleToTop() {\n    const { ctx, onToTop } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const { componentInstance } = ctx.get(\"canvas\");\n    const currentId = this._node.dslInfo.id;\n    const currentCss = this._node.dslInfo.props.css;\n    const zIndexsComponent = {};\n    let replaceId = null;\n    let replaceCss = \"\";\n\n    dslManager.dsl.page.map(({ id, props }, index, arr) => {\n      const ref = componentInstance.get(id);\n      const el = ReactDOM.findDOMNode(ref);\n      const zIndex = getComputedStyle(el).getPropertyValue(\"z-index\");\n\n      if (zIndex == arr.length - 1) {\n        replaceId = id;\n        replaceCss = props.css;\n      }\n\n      zIndexsComponent[id] = zIndex;\n    });\n\n    if (!(zIndexsComponent[currentId] == dslManager.dsl.page.length - 1)) {\n      onToTop?.({\n        currentId,\n        currentCss,\n        replaceId,\n        replaceCss,\n        value: dslManager.dsl.page.length - 1,\n        swapValue: getComputedStyle(this._node.el).getPropertyValue(\"z-index\"),\n      });\n    }\n  }\n\n  handleToBottom() {\n    const { ctx, onToBottom } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const { componentInstance } = ctx.get(\"canvas\");\n    const currentId = this._node.dslInfo.id;\n    const currentCss = this._node.dslInfo.props.css;\n    const zIndexsComponent = {};\n    let replaceId = null;\n    let replaceCss = \"\";\n\n    dslManager.dsl.page.map(({ id, props }, index, arr) => {\n      const ref = componentInstance.get(id);\n      const el = ReactDOM.findDOMNode(ref);\n      const zIndex = getComputedStyle(el).getPropertyValue(\"z-index\");\n\n      if (zIndex == 0) {\n        replaceId = id;\n        replaceCss = props.css;\n      }\n\n      zIndexsComponent[id] = zIndex;\n    });\n\n    if (!(zIndexsComponent[currentId] == 0)) {\n      onToBottom?.({\n        currentId,\n        currentCss,\n        replaceId,\n        replaceCss,\n        value: 0,\n        swapValue: getComputedStyle(this._node.el).getPropertyValue(\"z-index\"),\n      });\n    }\n  }\n\n  render() {\n    const { ctx, canResize, onDrag, onDragStart, onDragEnd, onDel } =\n      this.props;\n\n    return createPortal(\n      <>\n        <div\n          ref={(_) => (this.ref = _)}\n          className=\"panel-canvas-base-select-ghost\"\n          onMouseDown={this.handleMouseDown}\n        >\n          {canResize ? (\n            <>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tl\"\n                data-dir=\"tl\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tm\"\n                data-dir=\"tm\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tr\"\n                data-dir=\"tr\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-ml\"\n                data-dir=\"ml\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-mr\"\n                data-dir=\"mr\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bl\"\n                data-dir=\"bl\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bm\"\n                data-dir=\"bm\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-br\"\n                data-dir=\"br\"\n              ></div>\n            </>\n          ) : null}\n\n          <div className=\"panel-canvas-base-select-ghost-rotate\"></div>\n          {/* todo: 边界判断 位置放置 */}\n          <div\n            className=\"panel-canvas-base-select-ghost-op\"\n            ref={(_) => (this.refOp = _)}\n          >\n            <div className=\"panel-canvas-base-select-ghost-drag\" title=\"拖动\">\n              <img src={SvgDrag} />\n            </div>\n            {/* <div className=\"panel-canvas-base-select-ghost-copy\" title=\"复制\">\n              <img src={SvgCopy} />\n            </div> */}\n            <div\n              className=\"panel-canvas-base-select-ghost-top\"\n              title=\"置顶\"\n              onClick={this.handleToTop}\n            >\n              <img src={SvgTop} />\n            </div>\n            <div\n              className=\"panel-canvas-base-select-ghost-bottom\"\n              title=\"置底\"\n              onClick={this.handleToBottom}\n            >\n              <img src={SvgBottom} />\n            </div>\n            <div\n              className=\"panel-canvas-base-select-ghost-del\"\n              title=\"删除\"\n              onClick={this.handleDel}\n            >\n              <img src={SvgDel} />\n            </div>\n          </div>\n        </div>\n        <div\n          ref={(_) => (this.refMask = _)}\n          className=\"panel-canvas-base-select-ghost-mask\"\n        ></div>\n        <Line ref={(_) => (this.refTopHorLine = _)} />\n        <Line ref={(_) => (this.refBottomHorLine = _)} />\n        <Line type=\"ver\" ref={(_) => (this.refLeftVerLine = _)} />\n        <Line type=\"ver\" ref={(_) => (this.refRightVerLine = _)} />\n      </>,\n      this.portalDom\n    );\n  }\n}\n","import Logger from \"lp-logger\";\nimport ReactDOM from \"react-dom\";\n\nconst logger = new Logger({\n  name: \"le-PanelCanvasBase-utils\",\n  level: \"error\",\n});\n\nfunction getComponentNodeByFiberNode(fiberNode, component, dsl) {\n  const componentInfo =\n    component.get(fiberNode?.memoizedProps?.__componentName) || null;\n\n  if (!componentInfo && fiberNode.return) {\n    return getComponentNodeByFiberNode(fiberNode.return, component, dsl);\n  }\n\n  try {\n    return {\n      componentInfo,\n      el: ReactDOM.findDOMNode(fiberNode.stateNode),\n      dslInfo: getDSLById(fiberNode.stateNode.props.__id, dsl),\n    };\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction getDSLById(id, dsl) {\n  for (let i = 0; i < dsl.length; i++) {\n    const item = dsl[i];\n\n    if (item.id == id) {\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      const findSubItem = getDSLById(id, item.children);\n\n      if (findSubItem) {\n        return findSubItem;\n      }\n    }\n  }\n\n  return null;\n}\n\nexport { getComponentNodeByFiberNode };\n","import React from \"react\";\nimport { findDOMNode } from \"react-dom\";\nimport { observer } from \"mobx-react\";\nimport DesignRender from \"./../DesignRender\";\nimport Logger from \"lp-logger\";\nimport css from \"css\";\nimport { debounce, throttle } from \"lodash\";\nimport { utils, HoverGhost, SelectGhost } from \"./../PanelCanvasBase\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelCanvasAbsolute\",\n  level: \"error\",\n});\n\nclass PanelCanvasAbsolute extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.containerId = \"panel-canvas-absolute\";\n    this.componentInstance = new Map();\n    this.currentHover =\n      this.currentSelect =\n      this.currentDragHover =\n      this.refCanvas =\n      this.refHoverGhost =\n      this.refSelectGhost =\n      this.refDesignRender =\n      this.draging =\n        null;\n    this.handleOnMouseOver = debounce(this.handleOnMouseOver.bind(this), 50);\n    this.handleOnClickCapture = this.handleOnClickCapture.bind(this);\n    this.handleOnDragOver = throttle(this.handleOnDragOver.bind(this), 300);\n    this.handleOnDrop = this.handleOnDrop.bind(this);\n    this.handleOnClick = this.handleOnClick.bind(this);\n    this.handleSelectGhostOnDragStart =\n      this.handleSelectGhostOnDragStart.bind(this);\n    this.handleSelectGhostOnDrag = this.handleSelectGhostOnDrag.bind(this);\n    this.handleSelectGhostOnDragEnd =\n      this.handleSelectGhostOnDragEnd.bind(this);\n    this.handleSelectGhostOnDel = this.handleSelectGhostOnDel.bind(this);\n    this.handleGetComponentInstance =\n      this.handleGetComponentInstance.bind(this);\n    this.handleSelectGhostOnToZIndex =\n      this.handleSelectGhostOnToZIndex.bind(this);\n    this.handleOnMouseLeave = this.handleOnMouseLeave.bind(this);\n  }\n\n  componentDidMount() {\n    const { ctx } = this.props;\n\n    ctx.set(\"canvas\", {\n      containerId: this.containerId,\n      componentInstance: this.componentInstance,\n      selectNodeById: this.selectNodeById.bind(this),\n      hoverNodeById: this.hoverNodeById.bind(this),\n    });\n    window.document.addEventListener(\"mousemove\", this.handleOnMouseOver);\n    window.document.addEventListener(\"dragover\", this.handleWinOnDragOver);\n  }\n\n  componentWillUnmount() {\n    window.document.removeEventListener(\"mousemove\", this.handleOnMouseOver);\n    window.document.removeEventListener(\"dragover\", this.handleWinOnDragOver);\n  }\n\n  handleWinOnDragOver(e) {\n    e.preventDefault();\n  }\n\n  handleOnDragOver({ target }) {\n    if (this.currentDragHover == target) {\n      return;\n    }\n\n    this.currentDragHover = target;\n    // console.log(\"handleOnDragOver\", target);\n  }\n\n  handleOnDrop({ dataTransfer }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const componentItem = ctx\n      .get(\"component\")\n      .get(dataTransfer.getData(\"componentName\"));\n\n    if (!componentItem) {\n      return;\n    }\n\n    const { id } = dslManager.addPageDSL(componentItem);\n    setTimeout(() => {\n      const { dslInfo } = this.selectNodeById(id);\n\n      const cssObj = this._mergeCss(dslInfo.props.css, {\n        \"z-index\": dslManager.dsl.page.length - 1,\n      });\n      dslManager.setPageDslProp(\n        \"css\",\n        `:root {${Object.keys(cssObj)\n          .map((name) => `${name}:${cssObj[name]}`)\n          .join(\";\")}}`,\n        dslInfo.id\n      );\n    }, 300);\n    // console.log(\"handleOnDrop\", dataTransfer.getData(\"componentName\"));\n  }\n\n  _mergeCss(cssText, style = {}) {\n    const cssParse = css.parse(cssText, { silent: true });\n\n    if (cssParse.stylesheet.parsingErrors.length) {\n      logger.error(\"源码错误: \" + cssParse.stylesheet.parsingErrors);\n      return {};\n    } else {\n      const cssObj = {};\n\n      cssParse.stylesheet.rules[0].declarations.map((item) => {\n        cssObj[item.property] = item.value;\n      });\n\n      Object.entries(style).map(([key, value]) => {\n        cssObj[key] = value;\n      });\n\n      return cssObj;\n    }\n  }\n\n  handleOnMouseOver(e) {\n    if (!this.refCanvas.contains(e.target)) {\n      this.currentHover = null;\n      return;\n    }\n\n    const { target } = e;\n    const { ctx } = this.props;\n    const fiberId = Object.keys(target).find((key) =>\n      key.startsWith(\"__reactFiber$\")\n    );\n\n    //todo: performance\n    // 这个判断是有问题的，用该存储 node.el 进行判断，但会影响性能\n    if (target == this.currentSelect) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    if (this.currentHover == target) {\n      return;\n    }\n\n    if (!fiberId || !this.refCanvas.contains(target)) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    const node = utils.getComponentNodeByFiberNode(\n      target[fiberId],\n      ctx.get(\"component\"),\n      ctx.get(\"dsl\").dsl.page\n    );\n\n    if (!node) {\n      this.refHoverGhost.setNode(null);\n      return;\n    }\n\n    this.refHoverGhost.setNode(node.el, node);\n    this.currentHover = target;\n  }\n\n  handleOnClickCapture(e) {\n    // 只处理画布渲染内的\n    if (!findDOMNode(this.refDesignRender).contains(e.target)) {\n      return;\n    }\n\n    e.stopPropagation();\n\n    if (this.draging) {\n      return;\n    }\n\n    const { target } = e;\n    const { ctx } = this.props;\n    const fiberId = Object.keys(target).find((key) =>\n      key.startsWith(\"__reactFiber$\")\n    );\n\n    if (this.currentSelect == target) {\n      return;\n    }\n\n    if (!fiberId || !this.refCanvas.contains(target)) {\n      this.refSelectGhost.setNode(null);\n      return;\n    }\n\n    const node = utils.getComponentNodeByFiberNode(\n      target[fiberId],\n      ctx.get(\"component\"),\n      ctx.get(\"dsl\").dsl.page\n    );\n\n    this.currentSelect = target;\n\n    if (!node) {\n      this.refSelectGhost.setNode(null);\n      return;\n    }\n\n    this.refSelectGhost.setNode(node);\n    this.refHoverGhost.setNode(null);\n  }\n\n  handleOnClick(e) {}\n\n  handleSelectGhostOnDragStart() {\n    this.draging = true;\n  }\n  handleSelectGhostOnDrag() {}\n  handleSelectGhostOnDragEnd(style, { dslInfo }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const cssObj = this._mergeCss(dslInfo.props.css, style);\n    this.draging = false;\n\n    dslManager.setPageDslProp(\n      \"css\",\n      `:root {${Object.keys(cssObj)\n        .map((name) => `${name}:${cssObj[name]}`)\n        .join(\";\")}}`,\n      dslInfo.id\n    );\n  }\n  handleSelectGhostOnDel({ dslInfo }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    dslManager.delPageDsl(dslInfo.id);\n    this.currentSelect = this.currentHover = null;\n  }\n\n  handleGetComponentInstance(ref) {\n    if (!ref?.props?.__id) {\n      return;\n    }\n    // todo: 删除sync\n    this.componentInstance.set(ref.props.__id, ref);\n  }\n\n  handleSelectGhostOnToZIndex({\n    currentId,\n    currentCss,\n    replaceId,\n    replaceCss,\n    value,\n    swapValue,\n  }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    if (currentId == replaceId) {\n      return;\n    }\n\n    dslManager.setPageDslProp(\n      \"css\",\n      `:root {${Object.entries(this._mergeCss(currentCss, { \"z-index\": value }))\n        .map(([name, value]) => `${name}:${value}`)\n        .join(\";\")}}`,\n      currentId\n    );\n\n    replaceId &&\n      dslManager.setPageDslProp(\n        \"css\",\n        `:root {${Object.entries(\n          this._mergeCss(replaceCss, { \"z-index\": swapValue })\n        )\n          .map(([name, value]) => `${name}:${value}`)\n          .join(\";\")}}`,\n        replaceId\n      );\n  }\n\n  selectNodeById(id) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n\n    if (!this.componentInstance.get(id)) {\n      this.currentSelect = null;\n      return;\n    }\n\n    const node = {\n      el: findDOMNode(this.componentInstance.get(id)),\n      dslInfo: dslManager.getPageDSL(id),\n    };\n    node.componentInfo = component.get(node.dslInfo.componentName);\n    this.refSelectGhost.setNode(node);\n    this.currentSelect = node.el;\n    return node;\n  }\n\n  hoverNodeById(id) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n    let el;\n\n    if (!this.componentInstance.get(id)) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    // 当 dsl 修改后\n    // react 重新渲染，导致 react 实例还没有挂载到 dom 上，导致报错\n    try {\n      el = findDOMNode(this.componentInstance.get(id));\n    } catch (error) {\n      return;\n    }\n\n    const node = {\n      el,\n      dslInfo: dslManager.getPageDSL(id),\n    };\n    node.componentInfo = component.get(node.dslInfo.componentName);\n    this.refHoverGhost.setNode(node.el, node);\n    this.currentHover = node.el;\n    return node;\n  }\n\n  handleOnMouseLeave() {\n    this.refHoverGhost.setNode(null);\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n\n    logger.log(\"render\");\n\n    return (\n      // 实现空边距截图效果，所以外面包了一层\n      <div>\n        <div\n          className=\"panel-canvas-absolute\"\n          id={this.containerId}\n          onClickCapture={this.handleOnClickCapture}\n          onClick={this.handleOnClick}\n          onDragOver={this.handleOnDragOver}\n          onDrop={this.handleOnDrop}\n          onMouseLeave={this.handleOnMouseLeave}\n          ref={(_) => (this.refCanvas = _)}\n        >\n          {/* {!children ? <div className=\"panel-canvas-empty-block\"></div> : null} */}\n          <SelectGhost\n            ref={(_) => (this.refSelectGhost = _)}\n            canvasDomId={this.containerId}\n            ctx={ctx}\n            canResize\n            onDragStart={this.handleSelectGhostOnDragStart}\n            onDragEnd={this.handleSelectGhostOnDragEnd}\n            onDel={this.handleSelectGhostOnDel}\n            onToTop={this.handleSelectGhostOnToZIndex}\n            onToBottom={this.handleSelectGhostOnToZIndex}\n          />\n          <HoverGhost ref={(_) => (this.refHoverGhost = _)} />\n\n          {/* todo: 处理 给el自动加 absolute ，需要给 dsl 自动加这个属性\n        如果有 transition 的el，是否要给它覆盖 还是怎样？\n        */}\n          <DesignRender\n            ref={(_) => (this.refDesignRender = _)}\n            className=\"panel-canvas-absolute-render\"\n            dsl={dslManager.dsl.page}\n            component={component}\n            style={{ height: \"100%\" }}\n            getComponentInstance={this.handleGetComponentInstance}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelCanvasAbsolute);\n","import React from \"react\";\nimport { Button, InputNumber } from \"antd\";\n\nimport \"antd/lib/button/style/index.css\";\nimport \"antd/lib/input-number/style/index.css\";\n\nclass PanelResizeCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // 16 : 9\n      // x: 720,\n      // y: 405,\n      // bilibili size\n      x: 686,\n      y: 390,\n    };\n  }\n\n  componentDidMount() {\n    const { ctx } = this.props;\n    const { x, y } = this.state;\n    setTimeout(() => {\n      const canvasDOM = document.getElementById(\n        ctx.get(\"canvas\").containerId\n      );\n\n      canvasDOM.style.width = x + \"px\";\n      canvasDOM.style.height = y + \"px\";\n    });\n  }\n\n  handleOnChange(name, value) {\n    const { ctx } = this.props;\n    const canvasDOM = document.getElementById(\n      ctx.get(\"canvas\").containerId\n    );\n    this.setState({ [name]: value }, () => {\n      const { x, y } = this.state;\n      canvasDOM.style.width = x + \"px\";\n      canvasDOM.style.height = y + \"px\";\n    });\n  }\n\n  render() {\n    const { x, y } = this.state;\n    //\n    return (\n      <div>\n        <InputNumber\n          size=\"small\"\n          value={x}\n          onChange={(value) => this.handleOnChange(\"x\", value)}\n        />\n        &nbsp;x&nbsp;\n        <InputNumber\n          size=\"small\"\n          value={y}\n          onChange={(value) => this.handleOnChange(\"y\", value)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default PanelResizeCanvas;\n","export default __webpack_public_path__ + \"static/media/page.f2be2014.svg\";","export default __webpack_public_path__ + \"static/media/group.f35c57f1.svg\";","export default __webpack_public_path__ + \"static/media/link.98c02ce7.svg\";","import React from \"react\";\nimport svgPage from \"./static/page.svg\";\nimport svgGroup from \"./static/group.svg\";\nimport svgLink from \"./static/link.svg\";\nimport \"./TreeNode.css\";\n\nexport default class TreeNode extends React.Component {\n  static defaultProps = {\n    type: \"page\",\n    title: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderIcon() {\n    if (this.props.renderIcon) {\n      return this.props.renderIcon(this.props.type, this.props);\n    }\n\n    const getSvg = {\n      page: svgPage,\n      group: svgGroup,\n      link: svgLink,\n    };\n\n    return getSvg[this.props.type] ? (\n      <img\n        className=\"lp-react-tree-drag-TreeNode-icon\"\n        src={getSvg[this.props.type]}\n      />\n    ) : null;\n  }\n\n  renderTitle() {\n    if (this.props.renderTitle) {\n      return this.props.renderTitle(this.props.title, this.props);\n    }\n\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode-title\"\n        data-__lp_tree_node_id={this.props.id}\n      >\n        {this.props.renderTitle\n          ? this.props.renderTitle(this.props.title, this.props)\n          : this.props.title}\n      </div>\n    );\n  }\n\n  renderOp() {\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode-op\"\n        data-__lp_tree_node_id={this.props.id}\n      >\n        {this.props.renderOp ? this.props.renderOp(this.props) : null}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode\"\n        onDragStart={(e) => {\n          const dom = e.currentTarget;\n          dom.classList.add(\"lp-react-tree-drag-TreeNode-dragStart\");\n          this.props.onTreeNodeDragStart && this.props.onTreeNodeDragStart(e);\n        }}\n        onDragEnd={(e) => {\n          const dom = e.currentTarget;\n          dom.classList.remove(\"lp-react-tree-drag-TreeNode-dragStart\");\n          this.props.onTreeNodeDragEnd && this.props.onTreeNodeDragEnd(e);\n        }}\n        onDragOver={(e) => e.preventDefault()}\n        data-__lp_tree_node_id={this.props.id}\n      >\n        <div\n          className=\"lp-react-tree-drag-TreeNode-left\"\n          draggable\n          data-__lp_tree_node_id={this.props.id}\n        >\n          {this.renderIcon()}\n          {this.renderTitle()}\n        </div>\n        {this.renderOp()}\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/arrow.5e646b37.svg\";","import React from \"react\";\nimport { get } from \"lodash\";\nimport classnames from \"classnames\";\nimport TreeNode from \"./TreeNode.jsx\";\nimport svgArrow from \"./static/arrow.svg\";\nimport \"./TreeGroup.css\";\n\nexport default class TreeGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      expanded: this.props.expanded,\n    });\n  }\n\n  render() {\n    const { children, expandedAll, showLine } = this.props;\n    const { expanded } = this.state;\n    return (\n      <div\n        className={classnames(\"lp-react-tree-drag-TreeGroup\", {\n          \"lp-react-tree-drag-TreeGroup-collapse\": !expanded,\n        })}\n        onDragOver={(e) => {\n          e.currentTarget.lastChild.lastChild.classList.add(\n            \"lp-react-tree-drag-TreeGroup-enter\"\n          );\n          e.stopPropagation();\n          e.preventDefault();\n        }}\n        onDragLeave={(e) => {\n          e.currentTarget.lastChild.lastChild.classList.remove(\n            \"lp-react-tree-drag-TreeGroup-enter\"\n          );\n        }}\n      >\n        <img\n          className=\"lp-react-tree-drag-TreeGroup-arrow\"\n          src={svgArrow}\n          onClick={() =>\n            this.setState({\n              expanded: !expanded,\n            })\n          }\n        />\n        <div className=\"lp-react-tree-drag-TreeGroup-node\">\n          <TreeNode\n            {...this.props}\n            onTreeNodeDragStart={(e) => {\n              this.setState({\n                expanded: false,\n              });\n            }}\n            onTreeNodeDragEnd={(e) => {\n              this.setState({\n                expanded: true,\n              });\n            }}\n          />\n          <div\n            className={classnames(\"lp-react-tree-drag-TreeGroup-node-ch\", {\n              \"lp-react-tree-drag-TreeGroup-node-ch-line\": showLine,\n            })}\n          >\n            {(children || []).map((node, key) =>\n              node.type == \"group\" ? (\n                <TreeGroup\n                  key={key}\n                  {...node}\n                  item={node}\n                  expanded={expandedAll ? true : node.expanded}\n                  expandedAll={expandedAll}\n                  showLine={showLine}\n                />\n              ) : (\n                <TreeNode {...node} item={node} key={key} />\n              )\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","export function addObjecKey(obj, key, value) {\n  if (Object.prototype.toString.call(obj) != \"[object Object]\") {\n    return;\n  }\n\n  obj[key] =\n    Object.prototype.toString.call(value) == \"[object Function]\"\n      ? value()\n      : value;\n\n  Array.isArray(obj.children) &&\n    obj.children.map((_obj) => addObjecKey(_obj, key, value));\n\n  return obj;\n}\n\nexport function getNodeById(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeById(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function getNodeByIdAndDel(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      data.splice(i, 1);\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeByIdAndDel(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function getNodeByIdAndMarkNext(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      data[i] = \"next\";\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeById(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function setNodeByIdAndInsert(data, id, value, type) {\n  if (!value) {\n    return data;\n  }\n\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      if (type == \"insertBefore\") {\n        data.splice(i, 0, value);\n      } else if (type == \"appendAfter\") {\n        data.splice(i + 1, 0, value);\n      } else if (type == \"appendChild\") {\n        if (data[i].children) {\n          data[i].children.push(value);\n        } else {\n          data[i].children = [value];\n        }\n      }\n\n      break;\n    }\n\n    if (Array.isArray(item.children)) {\n      setNodeByIdAndInsert(item.children, id, value, type);\n    }\n  }\n}\n\nexport function setNodeByNext(data, value) {\n  if (!value) {\n    return data;\n  }\n\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item == \"next\") {\n      data[i] = value;\n\n      break;\n    }\n\n    // if (Array.isArray(item.children)) {\n    //   let value = setNodeById(item.children, id);\n    //   if (value) {\n    //     break;\n    //   }\n    // }\n  }\n\n  return data;\n}\n","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport { cloneDeep } from \"lodash\";\n\nimport TreeGroup from \"./TreeGroup.jsx\";\nimport TreeNode from \"./TreeNode.jsx\";\nimport { addObjecKey, getNodeByIdAndDel, setNodeByIdAndInsert } from \"./utils\";\nimport \"./Tree.css\";\n\nexport default class Tree extends React.Component {\n  static defaultProps = {\n    data: [],\n    expandedAll: false,\n    showLine: false,\n    key: Date.now(),\n    onHover: () => null,\n    onChange: () => null,\n    onClick: () => null,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      expandedAll: false,\n      showLine: false,\n    };\n    this.dragEnterIndex =\n      this.dragEnterDOM =\n      this.dragPlaceholderIndex =\n      this.refDragPlaceholder =\n      this.data =\n      this.hoverItem =\n      this.isDraging =\n        null;\n  }\n\n  componentDidMount() {\n    this.setState({\n      data: this.props.data,\n      expandedAll: this.props.expandedAll,\n      showLine: this.props.showLine,\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.data != this.props.data) {\n      this.setState({ data: nextProps.data });\n    }\n  }\n\n  onHover({ target }) {\n    if (this.isDraging) {\n      return;\n    }\n    const { data } = this.state;\n    const id = target?.dataset[\"__lp_tree_node_id\"];\n    if (this.hoverItem == id) {\n      return;\n    }\n\n    this.hoverItem = id;\n\n    for (let index = 0; index < data?.length; index++) {\n      const item = data[index];\n\n      if (item.id == id) {\n        this.props?.onHover(item);\n        return;\n      }\n    }\n\n    this.props?.onHover({});\n  }\n\n  onClick({ target }) {\n    const { data } = this.state;\n    const id = target?.dataset[\"__lp_tree_node_id\"];\n    for (let index = 0; index < data?.length; index++) {\n      const item = data[index];\n\n      if (item.id == id) {\n        this.props?.onClick(item);\n        return;\n      }\n    }\n  }\n\n  render() {\n    const { data, expandedAll, showLine, key } = this.state;\n    const { onChange } = this.props;\n\n    return (\n      <div\n        key={key}\n        className=\"lp-react-tree-drag-Tree\"\n        onDrag={(e) => {\n          if (!this.dragEnterDOM) {\n            return;\n          }\n\n          // 可插入节点的父级容器\n          const elParent =\n            this.dragEnterDOM.parentElement.className ==\n            \"lp-react-tree-drag-TreeGroup-node\"\n              ? this.dragEnterDOM.parentElement.lastElementChild // group则取child容器\n              : this.dragEnterDOM.parentElement;\n\n          // 接收元素的实际位置\n          const { top: enterElTop, height: enterElHeight } =\n            this.dragEnterDOM.getBoundingClientRect();\n\n          // 如果是group的底部，是否在边界区域\n          if (\n            [...this.dragEnterDOM.classList].includes(\n              \"lp-react-tree-drag-TreeGroup-node-ch\"\n            )\n          ) {\n            if (\n              e.clientY < enterElTop + enterElHeight &&\n              e.clientY > enterElTop + enterElHeight - 5\n            ) {\n              this.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.parentElement.parentElement.nextElementSibling\n              );\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                getNodeByIdAndDel(this.data, this.dragPlaceholderIndex),\n                \"appendAfter\"\n              );\n            }\n            return;\n          }\n\n          // 通过id取 拖动元素的实际值，并从对象上删除这个id key\n          const placeholderData = getNodeByIdAndDel(\n            this.data,\n            this.dragPlaceholderIndex\n          );\n\n          if (e.clientY < enterElTop + enterElHeight / 2) {\n            // 在接收元素的上面\n            if (\n              this.dragEnterDOM.parentElement.className ==\n              \"lp-react-tree-drag-TreeGroup-node\" // 如果接收元素是 group 节点\n            ) {\n              this.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.parentElement.parentElement\n              );\n            } else {\n              elParent.insertBefore(this.refDragPlaceholder, this.dragEnterDOM);\n            }\n            setNodeByIdAndInsert(\n              this.data,\n              this.dragEnterIndex,\n              placeholderData,\n              \"insertBefore\"\n            );\n          } else {\n            // 在接收元素的下面\n            if (\n              this.dragEnterDOM.parentElement.className ==\n              \"lp-react-tree-drag-TreeGroup-node\" // 如果接收元素是 group 节点\n            ) {\n              // 当前点的children追加\n              elParent.appendChild(this.refDragPlaceholder);\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                placeholderData,\n                \"appendChild\"\n              );\n            } else {\n              elParent.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.nextElementSibling\n              );\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                placeholderData,\n                \"appendAfter\"\n              );\n            }\n          }\n\n          this.dragEnterDOM = null;\n        }}\n        onDragStart={(e) => {\n          this.dragPlaceholderIndex = e.target.dataset.__lp_tree_node_id;\n          this.data = cloneDeep(data);\n          this.isDraging = true;\n        }}\n        onDragEnd={(e) => {\n          this.dragEnterDOM = null;\n          this.refDragPlaceholder.style.display = \"none\";\n          this.setState({\n            data: this.data,\n            key: Date.now(),\n          });\n          JSON.stringify(this.data) != JSON.stringify(this.state.data) &&\n            onChange?.(this.data);\n          setTimeout(() => (this.isDraging = false), 100);\n        }}\n        onDragEnter={(e) => {\n          // 是否是可接收的节点\n          if (\n            e.target.className == \"lp-react-tree-drag-TreeNode\" &&\n            e.target.firstElementChild.dataset.__lp_tree_node_id\n          ) {\n            this.dragEnterIndex =\n              e.target.firstElementChild.dataset.__lp_tree_node_id;\n            this.dragEnterDOM = e.target;\n          } else if (\n            [...e.target.classList].includes(\n              \"lp-react-tree-drag-TreeGroup-node-ch\"\n            )\n          ) {\n            this.dragEnterIndex =\n              e.target.parentElement.firstElementChild.firstElementChild.dataset.__lp_tree_node_id;\n            this.dragEnterDOM = e.target;\n          } else {\n            return;\n          }\n\n          // 显示占位符\n          this.refDragPlaceholder.style.display = \"block\";\n\n          if (\n            this.dragEnterDOM.parentElement.className ==\n            \"lp-react-tree-drag-TreeGroup-node\"\n          ) {\n            this.dragEnterDOM.parentElement.parentElement.classList.remove(\n              \"lp-react-tree-drag-TreeGroup-collapse\"\n            );\n          }\n\n          // 拖拽 和 接收的 是否是同一个元素，或者不合格的元素\n          if (\n            this.dragEnterIndex == this.dragPlaceholderIndex ||\n            !this.dragEnterIndex\n          ) {\n            return;\n          }\n        }}\n        onDragOver={(e) => e.preventDefault()}\n        onMouseOver={(e) => this.onHover(e)}\n        onMouseLeave={(e) => this.onHover({})}\n        onClick={(e) => this.onClick(e)}\n      >\n        {(data || []).map((node, key) =>\n          node.type == \"group\" ? (\n            <TreeGroup\n              key={key}\n              {...node}\n              item={node}\n              expanded={expandedAll ? true : node.expanded}\n              expandedAll={expandedAll}\n              showLine={showLine}\n            />\n          ) : (\n            <TreeNode {...node} item={node} key={key} />\n          )\n        )}\n        <div\n          className=\"lp-react-tree-drag-TreeNode-placeholder\"\n          ref={(r) => (this.refDragPlaceholder = ReactDom.findDOMNode(r))}\n        ></div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { debounce } from \"lodash\";\nimport Logger from \"lp-logger\";\nimport Tree from \"./compoents/Tree\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelOutline\",\n  level: \"error\",\n});\n\nexport default observer(\n  class extends React.Component {\n    constructor(props) {\n      super(props);\n\n      // 防止 setDSL 后，ref 没有挂载完成\n      this.onHover = debounce(this.onHover.bind(this), 300);\n    }\n\n    onHover(item) {\n      const { ctx } = this.props;\n      const canvas = ctx.get(\"canvas\");\n\n      canvas.hoverNodeById(item.id);\n    }\n\n    render() {\n      const { ctx } = this.props;\n      const dslManager = ctx.get(\"dsl\");\n      const canvas = ctx.get(\"canvas\");\n\n      logger.log(\"render\");\n\n      return (\n        <div className=\"panel-outline\">\n          <Tree\n            onHover={this.onHover}\n            onClick={(item) => {\n              canvas.selectNodeById(item.id);\n            }}\n            onChange={(data) => {\n              const pageDsl = data.map((item, index, arr) => {\n                const { title, props, ...other } = item;\n\n                return {\n                  ...other,\n                  props: {\n                    ...props,\n                    css: setZIndex(props.css, arr.length - index - 1),\n                  },\n                };\n              });\n\n              dslManager.setDSL({ page: pageDsl });\n            }}\n            data={dslManager.dsl.page\n              .slice()\n              .sort((a, b) => -getZIndex(a.props.css) + getZIndex(b.props.css))\n              .map((item) => ({\n                ...item,\n                title: item.componentName,\n              }))}\n          />\n        </div>\n      );\n    }\n  }\n);\n\nfunction setZIndex(str, value) {\n  return str.replace(/z-index:\\s*(-?\\d+?)/, `z-index:${value}`);\n}\n\nfunction getZIndex(str) {\n  return Number(str.match(/z-index:\\s*(-?\\d+?)/)?.[1]);\n}\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport { observer } from \"mobx-react\";\nimport MonacoEditor from \"react-monaco-editor\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelDSL\",\n  level: \"error\",\n});\n\nclass PanelDSL extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  componentDidMount() {}\n\n  render() {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    logger.log(\"render\");\n\n    return (\n      <div className=\"panel-dsl\">\n        <MonacoEditor\n          language=\"json\"\n          value={JSON.stringify(dslManager.dsl, null, 2)}\n          // onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelDSL);\n","import React from \"react\";\nimport { Input } from \"antd\";\n\nexport default class extends React.Component {\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e.target.value);\n  }\n\n  render() {\n    const { value, setValue, ...otherProps } = this.props;\n\n    return (\n      <Input value={value} onChange={(e) => this.onChange(e)} {...otherProps} />\n    );\n  }\n}\n","import React from \"react\";\nimport { Select } from \"antd\";\n\nexport default class extends React.Component {\n  static defaultProps = {\n    dataSource: [],\n  };\n\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e);\n  }\n\n  render() {\n    const { value, setValue, dataSource, ...otherProps } = this.props;\n\n    return (\n      <Select\n        value={value}\n        onChange={(e) => this.onChange(e)}\n        style={{ width: \"100%\" }}\n        {...otherProps}\n      >\n        {dataSource.map((item, key) => (\n          <Select.Option value={item.value} key={key}>\n            {item.title}\n          </Select.Option>\n        ))}\n      </Select>\n    );\n  }\n}\n","import TextSetter from \"./TextSetter\";\nimport SelectSetter from \"./SelectSetter\";\n\nexport default {\n  TextSetter,\n  SelectSetter,\n};\n","import React from \"react\";\nimport { Button, Input, Upload } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e.target.value);\n  }\n\n  uploadOnChange(file) {\n    const { setValue } = this.props;\n\n    setValue(URL.createObjectURL(file));\n    return false;\n  }\n\n  render() {\n    const { value, setValue, ...otherProps } = this.props;\n\n    return (\n      <div style={{ display: \"flex\" }}>\n        <Input value={value} onChange={(e) => this.onChange(e)} />\n        <Upload\n          showUploadList={false}\n          beforeUpload={(file) => this.uploadOnChange(file)}\n        >\n          <Button icon={<UploadOutlined />}></Button>\n        </Upload>\n      </div>\n    );\n  }\n}\n","import view from \"./view\";\n\nexport default view;\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./view.less\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { className, url, width } = this.props;\n    return (\n      <img\n        className={classnames(className, \"banner-picture\")}\n        src={url}\n      />\n    );\n  }\n}\n","import Setters from \"./../../PropSetters\";\nimport UploaderSetter from \"./setter.uploader\";\nimport view from \"./designView\";\n\nexport default {\n  title: \"图片\",\n  componentName: \"Picture\",\n  category: \"基础\",\n  icon: (\n    <svg\n      t=\"1636864133288\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"2739\"\n      width=\"128\"\n      height=\"128\"\n    >\n      <path\n        d=\"M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z\"\n        p-id=\"2740\"\n      ></path>\n    </svg>\n  ),\n  view: view,\n  canOperate: true,\n  hidden: false,\n  props: [\n    {\n      name: \"url\",\n      title: \"地址\",\n      description: \"\",\n      supportVariable: true,\n      value:\n        \"https://img.alicdn.com/imgextra/i2/O1CN01tHYs5C1tPxXFBHCot_!!6000000005895-0-tps-1898-1080.jpg\",\n      setter: <UploaderSetter />,\n      // display: \"none\",\n    },\n    // {\n    //   name: \"width\",\n    //   title: \"宽\",\n    //   description: \"\",\n    //   supportVariable: true,\n    //   value: \"100%\",\n    //   setter: <Setters.TextSetter />,\n    // },\n    {\n      name: \"css\",\n      value: \":root{width: 100%}\",\n      display: \"none\",\n    },\n  ],\n};\n","import view from \"./view\";\n\nexport default view;\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./view.less\";\n\nexport default class Page extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { title, type, className } = this.props;\n    return (\n      <div\n        className={classnames(className, \"banner-title\", \"banner-title-\" + type)}\n      >\n        {title}\n      </div>\n    );\n  }\n}\n","import Picture from \"./Picture/attribute\";\nimport Title from \"./Title/attribute\";\n\nexport default [Title, Picture];\n","import Setters from \"./../../PropSetters\";\nimport view from \"./designView\";\n\nexport default {\n  title: \"标题\",\n  componentName: \"Title\",\n  category: \"基础\",\n  icon: (\n    <svg\n      t=\"1636863825942\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1905\"\n      width=\"128\"\n      height=\"128\"\n    >\n      <path\n        d=\"M116.181404 133.722146 116.181404 441.133425 201.417293 441.133425 201.417293 133.722146 317.598697 133.722146 317.598697 64 0 64 0 133.722146 116.181404 133.722146ZM412.356282 125.799174 412.356282 64 335.263948 64 335.263948 125.799174 412.356282 125.799174ZM335.263948 168.055021 335.263948 441.133425 412.356282 441.133425 412.356282 168.055021 335.263948 168.055021ZM550.003263 168.055021 550.003263 86.184319 472.91093 86.184319 472.91093 168.055021 426.221206 168.055021 426.221206 218.233837 472.91093 218.233837 472.91093 379.33425C472.91093 393.067469 475.263489 404.159517 479.968678 412.610729 484.673868 421.06194 491.098164 427.576318 499.241762 432.154058 507.385359 436.731797 516.795596 439.812922 527.472757 441.397524 538.149917 442.982126 549.4603 443.774415 561.404242 443.774415 569.004932 443.774415 576.786475 443.598351 584.749103 443.246218 592.711731 442.894084 599.950376 442.189827 606.465253 441.133425L606.465253 383.031637C602.845877 383.735905 599.045588 384.264097 595.064275 384.616231 591.082961 384.968365 586.92074 385.144429 582.577488 385.144429 569.547733 385.144429 560.86136 383.031658 556.518108 378.806052 552.174856 374.580447 550.003263 366.129362 550.003263 353.452545L550.003263 218.233837 606.465253 218.233837 606.465253 168.055021 550.003263 168.055021ZM624.673409 64 624.673409 441.133425 701.765741 441.133425 701.765741 64 624.673409 64ZM930.620557 275.279229 805.209786 275.279229C805.571725 269.997222 806.748006 264.011037 808.738662 257.320495 810.729318 250.629953 814.167674 244.291639 819.05383 238.305364 823.939994 232.31909 830.454771 227.301258 838.598368 223.25172 846.741965 219.20218 856.966547 217.177441 869.272429 217.177441 888.09319 217.177441 902.118061 222.107241 911.347469 231.966988 920.576883 241.826734 927.001178 256.264004 930.620557 275.279229L930.620557 275.279229ZM805.209786 322.817057 1007.71289 322.817057C1009.16064 301.689028 1007.350976 281.441637 1002.283853 262.074278 997.216723 242.706918 988.982765 225.45262 977.581728 210.310867 966.180691 195.169113 951.612922 183.10871 933.877978 174.129299 916.143034 165.149886 895.33193 160.660248 871.444045 160.660248 850.089722 160.660248 830.635866 164.357597 813.081888 171.752407 795.527917 179.147217 780.417248 189.270913 767.749427 202.123796 755.081613 214.97668 745.30944 230.206239 738.432627 247.81293 731.555808 265.41962 728.117453 284.434561 728.117453 304.858322 728.117453 325.986351 731.465325 345.35342 738.161171 362.96011 744.857018 380.566801 754.357741 395.708327 766.663622 408.385144 778.969498 421.061962 793.98969 430.833528 811.724634 437.700138 829.459578 444.566747 849.36585 448 871.444045 448 903.29456 448 930.439475 440.957429 952.87961 426.872077 975.319744 412.786724 991.968627 389.370177 1002.826752 356.621733L934.963782 356.621733C932.430221 365.072945 925.55351 373.083869 914.33344 380.654746 903.113376 388.225622 889.721882 392.011004 874.158566 392.011004 852.442304 392.011004 835.793421 386.553012 824.211418 375.636864 812.629414 364.720716 806.295597 347.114289 805.209786 322.817057ZM0 576 1024 576 1024 640 0 640 0 576ZM0 768 1024 768 1024 832 0 832 0 768ZM0 960 768 960 768 1024 0 1024 0 960Z\"\n        p-id=\"1906\"\n      ></path>\n    </svg>\n  ),\n  view: view,\n  canOperate: true,\n  hidden: false,\n  props: [\n    {\n      name: \"title\",\n      title: \"标题\",\n      description: \"\",\n      supportVariable: true,\n      value: \"标题\",\n      setter: <Setters.TextSetter />,\n    },\n    {\n      name: \"type\",\n      title: \"类型\",\n      description: \"\",\n      supportVariable: true,\n      value: \"lvyou\",\n      setter: (\n        <Setters.SelectSetter\n          dataSource={[\n            { title: \"开箱\", value: \"kaixiang\" },\n            { title: \"旅游\", value: \"lvyou\" },\n            { title: \"健身\", value: \"jianshen\" },\n            { title: \"航拍\", value: \"hangpai\" },\n            { title: \"美食\", value: \"meishi\" },\n            { title: \"音乐\", value: \"yinyue\" },\n          ]}\n        />\n      ),\n    },\n    {\n      name: \"css\",\n      value: \":root{}\",\n      display: \"none\",\n    },\n  ],\n};\n","import events from \"events\";\n\nclass SingleEventBus {\n  constructor() {\n    this.event = new events();\n  }\n\n  getEvent() {\n    return this.event;\n  }\n\n  emit(eventName, ...args) {\n    return this.event.emit(eventName, ...args);\n  }\n\n  on(eventName, callback) {\n    this.event.on(eventName, callback);\n    return () => {\n      this.event.removeListener(eventName, callback);\n    };\n  }\n\n  off(eventName, callback) {\n    return callback\n      ? this.event.removeListener(eventName, callback)\n      : this.event.removeAllListeners(eventName);\n  }\n}\n\nexport default new SingleEventBus();\n","import React from \"react\";\nimport DSL from \"./store\";\nimport Skeleton from \"./components/Skeleton\";\nimport PanelGenImg from \"./components/PanelGenImg\";\nimport PanelAbout from \"./components/PanelAbout\";\nimport PanelLogo from \"./components/PanelLogo\";\nimport PanelComponent from \"./components/PanelComponent\";\nimport PanelAttribute from \"./components/PanelAttribute\";\nimport PanelCanvasAbsolute from \"./components/PanelCanvasAbsolute\";\nimport PanelResizeCanvas from \"./components/PanelResizeCanvas\";\nimport PanelOutline from \"./components/PanelOutline\";\nimport PanelDSL from \"./components/PanelDSL\";\nimport components from \"./components/ComponentBanner\";\nimport event from \"./utils/SingleEventBus\";\n\nconst ctx = new Map();\nwindow.__ctx = ctx;\n\n// ctx event\nctx.set(\"event\", event);\n\n// ctx component\nctx.set(\"component\", new Map());\ncomponents.map((item) => {\n  ctx.get(\"component\").set(item.componentName, item);\n});\n\n// ctx dsl\nconst dslInstance = new DSL({\n  page: [\n    {\n      id: \"Picture_xJ27Wh9O3muw6haQPoKsO\",\n      componentName: \"Picture\",\n      props: {\n        url: \"https://img.alicdn.com/imgextra/i2/O1CN01tHYs5C1tPxXFBHCot_!!6000000005895-0-tps-1898-1080.jpg\",\n        css: \":root{width: 100%;z-index:0;}\",\n      },\n    },\n    {\n      id: \"Title_Hq6ZGVsCSIvMP_kB8udl2\",\n      componentName: \"Title\",\n      props: {\n        title: \"冲浪vlog\",\n        type: \"jianshen\",\n        css: \":root {left:0px;top:191px;width:686px;z-index:1;}\",\n      },\n    },\n  ],\n});\nctx.set(\"dsl\", dslInstance);\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    ctx.get(\"skeleton\").openDockByName(\"component\");\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <Skeleton\n          ctx={ctx}\n          topArea={[\n            {\n              content: <PanelLogo />,\n            },\n            {\n              align: \"right\",\n              content: <PanelGenImg />,\n            },\n            {\n              align: \"right\",\n              content: <PanelAbout />,\n            },\n            {\n              align: \"center\",\n              content: <PanelResizeCanvas />,\n            },\n          ]}\n          leftArea={[\n            {\n              name: \"component\",\n              title: \"组件面板\",\n              icon: \"https://img.alicdn.com/imgextra/i2/O1CN01SpaA3D1dJ3gIsZltR_!!6000000003714-2-tps-128-128.png\",\n              content: <PanelComponent />,\n            },\n            {\n              name: \"outline\",\n              title: \"大纲面板\",\n              hidden: false,\n              icon: \"https://img.alicdn.com/imgextra/i1/O1CN01ED4RnW1OVgMdOEZkH_!!6000000001711-2-tps-128-128.png\",\n              content: <PanelOutline />,\n            },\n            {\n              name: \"dsl\",\n              title: \"DSL 面板\",\n              align: \"bottom\",\n              icon: \"https://img.alicdn.com/imgextra/i3/O1CN01liE81S23dpeqriifl_!!6000000007279-2-tps-128-128.png\",\n              content: <PanelDSL />,\n              width: \"500px\",\n              boxType: \"float\",\n            },\n          ]}\n          centerArea={[\n            {\n              content: <PanelCanvasAbsolute />,\n            },\n          ]}\n          rightArea={[\n            {\n              content: <PanelAttribute />,\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./app\";\nimport \"./index.less\";\n\n// 还有一块错误的收集\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}